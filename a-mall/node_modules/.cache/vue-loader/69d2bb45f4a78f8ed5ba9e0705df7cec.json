{"remainingRequest":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!G:\\webstorm-test\\shop-mall-master\\src\\views\\detail\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\webstorm-test\\shop-mall-master\\src\\views\\detail\\Detail.vue","mtime":1603446829000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEZXRhaWxOYXZCYXIgZnJvbSAiLi9jaGlsZHJlbi9EZXRhaWxOYXZCYXIiOwppbXBvcnQgRGV0YWlsU3dpcGVyIGZyb20gIi4vY2hpbGRyZW4vRGV0YWlsU3dpcGVyIjsKaW1wb3J0IERldGFpbEJhc2VJbmZvIGZyb20gIi4vY2hpbGRyZW4vRGV0YWlsQmFzZUluZm8iOwppbXBvcnQgRGV0YWlsU2hvcEluZm8gZnJvbSAiLi9jaGlsZHJlbi9EZXRhaWxTaG9wSW5mbyI7CmltcG9ydCBEZXRhaURyZXNzSW5mbyBmcm9tICIuL2NoaWxkcmVuL0RldGFpRHJlc3NJbmZvIjsKaW1wb3J0IERldGFpbEl0ZW1QYXJhbXMgZnJvbSAiLi9jaGlsZHJlbi9EZXRhaWxJdGVtUGFyYW1zIjsKaW1wb3J0IERldGFpbENvbW1lbnRJbmZvIGZyb20gIi4vY2hpbGRyZW4vRGV0YWlsQ29tbWVudEluZm8iOwppbXBvcnQgRGV0YWlsQm90dG9tQmFyIGZyb20gIi4vY2hpbGRyZW4vRGV0YWlsQm90dG9tQmFyIjsKaW1wb3J0IHtnZXREZXRhaWxEYXRhLCBHZXREZWF0aWxCYXNlRGF0YSwgR2V0RGV0YWlsU2hvcEluZm8sIEdldEl0ZW1QYXJhbXMsIGdldFJlY29tbWVudGREYXRhfSBmcm9tICduZXR3b3JrL2RldGFpbCcKaW1wb3J0IFNjcm9sbCBmcm9tICJjb21wb25lbnRzL2NvbW1vbi9zY3JvbGwvU2Nyb2xsIjsKaW1wb3J0IEdvb2RzTGlzdCBmcm9tICJjb21wb25lbnRzL2NvbnRlbnQvZ29vZHMvR29vZHNMaXN0IjsKaW1wb3J0IHtpbWdNaXhpbixiYWNrVG9wTWl4aW59IGZyb20gJ2NvbW1vbi9taXhpbicKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZXRhaWwiLAogIGNvbXBvbmVudHM6ewogICAgR29vZHNMaXN0LAogICAgRGV0YWlsU2hvcEluZm8sCiAgICBEZXRhaWxCYXNlSW5mbywKICAgIERldGFpbE5hdkJhciwKICAgIERldGFpbFN3aXBlciwKICAgIERldGFpRHJlc3NJbmZvLAogICAgRGV0YWlsSXRlbVBhcmFtcywKICAgIFNjcm9sbCwKICAgIERldGFpbENvbW1lbnRJbmZvLAogICAgRGV0YWlsQm90dG9tQmFyCiAgfSwKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICB0aXRsZXM6WyfllYblk4EnLCflj4LmlbAnLCfor4TorronLCfmjqjojZAnXSwKICAgICAgLy/ova7mkq3lm77nhafniYcKICAgICAgdG9wSW1hZ2VzOltdLAogICAgICBiYXNlRGF0YSA6IHt9LAogICAgICBzaG9wSW5mbzp7fSwKICAgICAgZGV0YWlsSW5mbzp7fSwKICAgICAgaXRlbVBhcmFtczp7fSwKICAgICAgcmF0ZTp7fSwKICAgICAgcmVjb21tZW5kZWQ6W10sCiAgICAgIG9mZnNldFRvcFk6W10sCiAgICAgIGN1cnJlbnRJbmRleDowLAogICAgICBpaWQ6MAogICAgfQogIH0sCiAgbWl4aW5zOltpbWdNaXhpbixiYWNrVG9wTWl4aW5dLAogIGNyZWF0ZWQoKSB7CiAgICBnZXREZXRhaWxEYXRhKHRoaXMuJHJvdXRlLnBhcmFtcy5paWQpLnRoZW4ocmVzPT57CiAgICAgIHRoaXMuaWlkID0gcmVzLmlpZAogICAgICBjb25zdCBkYXRhID0gcmVzLnJlc3VsdAogICAgICB0aGlzLnRvcEltYWdlcyA9IGRhdGEuaXRlbUluZm8udG9wSW1hZ2VzCiAgICAgIHRoaXMuYmFzZURhdGEgPSBuZXcgR2V0RGVhdGlsQmFzZURhdGEoZGF0YS5pdGVtSW5mbyxkYXRhLmNvbHVtbnMsZGF0YS5zaG9wSW5mbykKICAgICAgdGhpcy5zaG9wSW5mbyA9IG5ldyBHZXREZXRhaWxTaG9wSW5mbyhkYXRhLnNob3BJbmZvKQogICAgICB0aGlzLmRldGFpbEluZm8gPSBkYXRhLmRldGFpbEluZm8KICAgICAgdGhpcy5pdGVtUGFyYW1zID1kYXRhLml0ZW1QYXJhbXMgPyBuZXcgR2V0SXRlbVBhcmFtcyhkYXRhLml0ZW1QYXJhbXMpOnt9CiAgICAgIHRoaXMucmF0ZSA9IGRhdGEucmF0ZS5saXN0P2RhdGEucmF0ZS5saXN0WzBdOnt9CiAgICB9KQogICAgLy/ojrflj5bmjqjojZDkv6Hmga8KICAgIGdldFJlY29tbWVudGREYXRhKCkudGhlbihyZXM9PnsKICAgICAgdGhpcy5yZWNvbW1lbmRlZCA9IHJlcy5kYXRhLmxpc3QKICAgIH0pCiAgfSwKICBtZXRob2RzOnsKICAgIGltZ0xvYWQoKXsKICAgICAgdGhpcy4kcmVmcy5zY3JvbGwucmVmcmVzaCgpCiAgICAgIHRoaXMub2Zmc2V0VG9wWS5wdXNoKDApCiAgICAgIHRoaXMub2Zmc2V0VG9wWS5wdXNoKHRoaXMuJHJlZnMuaXRlbVBhcmFtcy4kZWwub2Zmc2V0VG9wKQogICAgICB0aGlzLm9mZnNldFRvcFkucHVzaCh0aGlzLiRyZWZzLmNvbW1lbnQuJGVsLm9mZnNldFRvcCkKICAgICAgdGhpcy5vZmZzZXRUb3BZLnB1c2godGhpcy4kcmVmcy5yZWNvbW1lbmQub2Zmc2V0VG9wKQogICAgICB0aGlzLm9mZnNldFRvcFkucHVzaChOdW1iZXIuTUFYX1ZBTFVFKQogICAgfSwKICAgIGl0ZW1DbGljayhpbmRleCl7CiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnNjcm9sbFRvKDAsLXRoaXMub2Zmc2V0VG9wWVtpbmRleF0sNTAwKQogICAgfSwKICAgIHNjcm9sbFBvc2l0b24ocG9zaXRpb24pewogICAgICBsZXQgcG9zaXRpb25ZID0gLXBvc2l0aW9uLnkKICAgICAgZm9yKGxldCBpID0gMDtpIDwgdGhpcy5vZmZzZXRUb3BZLmxlbmd0aC0xO2krKyl7CiAgICAgICAgaWYodGhpcy5jdXJyZW50SW5kZXggIT09IGkgJiYgKHBvc2l0aW9uWSA+IHRoaXMub2Zmc2V0VG9wWVtpXSAmJiBwb3NpdGlvblkgPCB0aGlzLm9mZnNldFRvcFlbaSsxXSkpewogICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBpCgogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLiRyZWZzLm5hdl9iYXIuY3VycmVudEluZGV4ID0gdGhpcy5jdXJyZW50SW5kZXgKICAgIH0sCiAgICBhZGRDYXJ0KCl7CiAgICAgIGNvbnN0IGNhcnRMaXN0RGF0YSA9IHsKICAgICAgICB0aXRsZSA6IHRoaXMuYmFzZURhdGEudGl0bGUsCiAgICAgICAgZGVzYyA6IHRoaXMuYmFzZURhdGEuZGVzYywKICAgICAgICBpaWQgOiB0aGlzLmlpZCwKICAgICAgICBpbWFnZSA6IHRoaXMudG9wSW1hZ2VzWzBdLAogICAgICAgIHByaWNlOnRoaXMuYmFzZURhdGEubG93Tm93UHJpY2UKICAgICAgfQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYWRkQ2FydCcsY2FydExpc3REYXRhKQogICAgfQogIH0sCiAgZGVzdHJveWVkKCkgewogICAgdGhpcy4kYnVzLiRvZmYoJ2ltZ0xvYWQnLHRoaXMuaW1nTGlzdGVuZXIpCiAgfQoKfQo="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Detail.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\n  <div id=\"detail\">\n    <!--导航-->\n    <detail-nav-bar :titles=\"titles\" @itemClick=\"itemClick\" ref=\"nav_bar\"/>\n    <scroll class=\"scroll\" ref=\"scroll\" :whatProbeType=\"3\" @scrollPositon=\"scrollPositon\" @showBackTop=\"showBackTop\">\n      <template  v-slot:default>\n        <!--轮播图-->\n        <detail-swiper :top-images=\"topImages\"/>\n        <!--基本信息-->\n        <detail-base-info :base-data=\"baseData\"/>\n        <!--店铺信息-->\n        <detail-shop-info :shop-info=\"shopInfo\"/>\n        <!--穿着效果-->\n        <detai-dress-info :detail-info=\"detailInfo\" @imgLoad=\"imgLoad\"/>\n        <!--尺码标准-->\n        <detail-item-params :item-params=\"itemParams\" ref=\"itemParams\"/>\n        <!--评论信息-->\n        <detail-comment-info :rate=\"rate\" ref=\"comment\"/>\n        <!--推荐商品-->\n        <div ref=\"recommend\">\n          <p class=\"recommend\">推荐商品</p>\n          <goods-list :goods=\"recommended\"/>\n        </div>\n      </template>\n    </scroll>\n    <!--返回顶部按钮-->\n    <back-top @click.native=\"scrollTop\" v-show=\"isShopBackTop\"/>\n    <!--底部-->\n    <detail-bottom-bar @addCart=\"addCart\"/>\n  </div>\n</template>\n\n<script>\n  import DetailNavBar from \"./children/DetailNavBar\";\n  import DetailSwiper from \"./children/DetailSwiper\";\n  import DetailBaseInfo from \"./children/DetailBaseInfo\";\n  import DetailShopInfo from \"./children/DetailShopInfo\";\n  import DetaiDressInfo from \"./children/DetaiDressInfo\";\n  import DetailItemParams from \"./children/DetailItemParams\";\n  import DetailCommentInfo from \"./children/DetailCommentInfo\";\n  import DetailBottomBar from \"./children/DetailBottomBar\";\n  import {getDetailData, GetDeatilBaseData, GetDetailShopInfo, GetItemParams, getRecommentdData} from 'network/detail'\n  import Scroll from \"components/common/scroll/Scroll\";\n  import GoodsList from \"components/content/goods/GoodsList\";\n  import {imgMixin,backTopMixin} from 'common/mixin'\n  export default {\n    name: \"Detail\",\n    components:{\n      GoodsList,\n      DetailShopInfo,\n      DetailBaseInfo,\n      DetailNavBar,\n      DetailSwiper,\n      DetaiDressInfo,\n      DetailItemParams,\n      Scroll,\n      DetailCommentInfo,\n      DetailBottomBar\n    },\n    data(){\n      return {\n        titles:['商品','参数','评论','推荐'],\n        //轮播图照片\n        topImages:[],\n        baseData : {},\n        shopInfo:{},\n        detailInfo:{},\n        itemParams:{},\n        rate:{},\n        recommended:[],\n        offsetTopY:[],\n        currentIndex:0,\n        iid:0\n      }\n    },\n    mixins:[imgMixin,backTopMixin],\n    created() {\n      getDetailData(this.$route.params.iid).then(res=>{\n        this.iid = res.iid\n        const data = res.result\n        this.topImages = data.itemInfo.topImages\n        this.baseData = new GetDeatilBaseData(data.itemInfo,data.columns,data.shopInfo)\n        this.shopInfo = new GetDetailShopInfo(data.shopInfo)\n        this.detailInfo = data.detailInfo\n        this.itemParams =data.itemParams ? new GetItemParams(data.itemParams):{}\n        this.rate = data.rate.list?data.rate.list[0]:{}\n      })\n      //获取推荐信息\n      getRecommentdData().then(res=>{\n        this.recommended = res.data.list\n      })\n    },\n    methods:{\n      imgLoad(){\n        this.$refs.scroll.refresh()\n        this.offsetTopY.push(0)\n        this.offsetTopY.push(this.$refs.itemParams.$el.offsetTop)\n        this.offsetTopY.push(this.$refs.comment.$el.offsetTop)\n        this.offsetTopY.push(this.$refs.recommend.offsetTop)\n        this.offsetTopY.push(Number.MAX_VALUE)\n      },\n      itemClick(index){\n        this.$refs.scroll.scrollTo(0,-this.offsetTopY[index],500)\n      },\n      scrollPositon(position){\n        let positionY = -position.y\n        for(let i = 0;i < this.offsetTopY.length-1;i++){\n          if(this.currentIndex !== i && (positionY > this.offsetTopY[i] && positionY < this.offsetTopY[i+1])){\n            this.currentIndex = i\n\n          }\n        }\n        this.$refs.nav_bar.currentIndex = this.currentIndex\n      },\n      addCart(){\n        const cartListData = {\n          title : this.baseData.title,\n          desc : this.baseData.desc,\n          iid : this.iid,\n          image : this.topImages[0],\n          price:this.baseData.lowNowPrice\n        }\n        this.$store.dispatch('addCart',cartListData)\n      }\n    },\n    destroyed() {\n      this.$bus.$off('imgLoad',this.imgListener)\n    }\n\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  #detail{\n    position: relative;\n    height: 100%;\n    z-index: 19;\n    background-color: #fff;\n    overflow: hidden;\n    .scroll {\n      position: absolute;\n      top: 44px;\n      left: 0;\n      right: 0;\n      bottom: 50px;\n      overflow: hidden;\n    }\n    .recommend{\n      padding: 8px;\n    }\n  }\n</style>\n"]}]}