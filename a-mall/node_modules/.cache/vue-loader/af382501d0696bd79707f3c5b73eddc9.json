{"remainingRequest":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!G:\\webstorm-test\\shop-mall-master\\src\\views\\home\\Home.vue?vue&type=style&index=0&id=3dd2e005&lang=scss&scoped=true&","dependencies":[{"path":"G:\\webstorm-test\\shop-mall-master\\src\\views\\home\\Home.vue","mtime":1603446829000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_sass-loader@8.0.2@sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouaG9tZSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGhlaWdodDogMTAwdmg7Cn0KLnNjcm9sbHsKICBvdmVyZmxvdzogaGlkZGVuOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDQ4cHg7CiAgcmlnaHQ6IDA7CiAgbGVmdDogMDsKICBib3R0b206IDU0cHg7Cn0KLnRhYl9jb250cm9sewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB6LWluZGV4OiA5OwogIHRvcDogLTFweDsKfQo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n  <div class=\"home\">\n    <!--导航栏-->\n    <home-nav-bar/>\n    <tab-control :titles=\"titles\" @itemClick=\"itemClick\" :class=\"{tab_control:isShopTabControl}\" ref=\"tabControl\" v-show=\"isShopTabControl\" />\n    <scroll class=\"scroll\" :isPullUpLoad=\"true\" ref=\"scroll\"\n       @onPullingUp=\"loadMore\" :whatProbeType=\"2\" @showBackTop=\"showBackTop\"  @scrollPositon=\"scrollPositon\"\n    >\n      <template v-slot:default>\n        <!--轮播图-->\n        <swiper :banners=\"banners\" @imgLoadOver=\"imgLoadOver\"/>\n        <!--推荐信息-->\n        <recommend-view :recommends=\"recommends\"/>\n        <!--特性-->\n        <feture-view/>\n        <!--导航控制-->\n        <tab-control :titles=\"titles\" @itemClick=\"itemClick\" ref=\"tabControl1\"/>\n        <!--商品列表-->\n        <goods-list :goods=\"goods[currentTitles].list\"/>\n      </template>\n    </scroll>\n    <!--返回顶部按钮-->\n    <back-top @click.native=\"scrollTop\" v-show=\"isShopBackTop\"/>\n  </div>\n</template>\n\n<script>\n  //导入公共组件\n  import TabControl from \"components/content/tabcontrol/TabControl\";\n  import GoodsList from \"components/content/goods/GoodsList\";\n  import Scroll from \"components/common/scroll/Scroll\";\n  //导入子组件\n  import Swiper from \"./children/Swiper\";\n  import RecommendView from \"./children/RecommendView\";\n  import HomeNavBar from \"./children/HomeNavBar\";\n  import FetureView from \"./children/FetureView\";\n\n  //导入函数\n  import {getHomeMutilData,getHomeGoodsData} from \"network/home\";\n  import {debounce} from \"common/utils\";\n  import {imgMixin,backTopMixin} from 'common/mixin'\n  export default {\n    name: \"Home\",\n    components:{\n      RecommendView,\n      HomeNavBar,\n      Swiper,\n      FetureView,\n      TabControl,\n      GoodsList,\n      Scroll,\n    },\n    data(){\n      return {\n        banners:[],\n        recommends:[],\n        titles:['流行','新款','精选'],\n        goods:{\n          pop:{page:0,list:[]},\n          new:{page:0,list:[]},\n          sell:{page:0,list:[]},\n        },\n        currentTitles:'pop',\n        isShopTabControl:false,\n        tabOffsetTop:0,\n        currentY:0 ,\n        isLoading:true\n      }\n    },\n    mixins:[imgMixin,backTopMixin],\n    created() {\n      this.getHomeMutil()\n      this.getHomeGoods('pop')\n      this.getHomeGoods('new')\n      this.getHomeGoods('sell')\n    },\n    mounted() {\n      const refresh = debounce(this.$refs.scroll.refresh,100)\n      debounce(this.$bus.$on('imgLoad', () => {\n        refresh()\n      }))\n    },\n    methods:{\n      getHomeMutil(){\n        return getHomeMutilData().then(res=>{\n          this.banners = res.data.banner.list\n          this.recommends = res.data.recommend.list\n        })\n      },\n      getHomeGoods(type){\n        let page = this.goods[type].page + 1\n        return getHomeGoodsData(type,page).then(res=>{\n          let data = res.data.list\n          this.goods[type].list.push(...data)\n          this.goods[type].page += 1\n          //完成上拉加载更多\n          this.$refs.scroll && this.$refs.scroll.finishLoad()\n        })\n      },\n      itemClick(index){\n        switch (index) {\n          case 0:\n            this.currentTitles = 'pop'\n            break;\n          case 1:\n            this.currentTitles = 'new'\n            break;\n          case 2:\n            this.currentTitles = 'sell'\n            break;\n        }\n        this.$refs.tabControl.currentIndex = index\n        this.$refs.tabControl1.currentIndex = index\n      },\n\n      scrollTop(){\n        this.$refs.scroll.scrollTo(0,0,500)\n      },\n      loadMore(){\n        this.getHomeGoods(this.currentTitles)\n      },\n      scrollPositon(position){\n        this.isShopTabControl = position.y < (-this.tabOffsetTop) ? true  : false\n      },\n      imgLoadOver(){\n        this.tabOffsetTop = this.$refs.tabControl1.$el.offsetTop\n      },\n    },\n    activated() {\n      this.$refs.scroll.scrollTo(0,this.currentY,50)\n      this.$refs.scroll.refresh()\n    },\n    deactivated() {\n      this.currentY = this.$refs.scroll.getPositionY()\n      this.$bus.$off('imgLoad',this.imgListener)\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .home {\n    position: relative;\n    height: 100vh;\n  }\n  .scroll{\n    overflow: hidden;\n    position: absolute;\n    top: 48px;\n    right: 0;\n    left: 0;\n    bottom: 54px;\n  }\n  .tab_control{\n    position: relative;\n    z-index: 9;\n    top: -1px;\n  }\n</style>\n"]}]}