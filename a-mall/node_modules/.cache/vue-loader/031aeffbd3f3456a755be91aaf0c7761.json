{"remainingRequest":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!G:\\webstorm-test\\shop-mall-master\\src\\views\\category\\Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\webstorm-test\\shop-mall-master\\src\\views\\category\\Category.vue","mtime":1603446829000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDYXRlZ29yeU5hdkJhciBmcm9tICIuL2NoaWxkcmVuL0NhdGVnb3J5TmF2QmFyIjsKaW1wb3J0IENhdGVnb3J5U2xpZGUgZnJvbSAiLi9jaGlsZHJlbi9DYXRlZ29yeVNsaWRlIjsKaW1wb3J0IENhdGVnb3J5Q29udGVudCBmcm9tICIuL2NoaWxkcmVuL0NhdGVnb3J5Q29udGVudCI7CmltcG9ydCB7Z2V0Q2F0ZWdvcnksZ2V0U3ViY2F0ZWdvcnksZ2V0Q2F0ZWdvcnlEZXRhaWx9IGZyb20gJ25ldHdvcmsvY2F0ZWdvcnknCmltcG9ydCB7aW1nTWl4aW59IGZyb20gJ2NvbW1vbi9taXhpbicKaW1wb3J0IFNjcm9sbCBmcm9tICJjb21wb25lbnRzL2NvbW1vbi9zY3JvbGwvU2Nyb2xsIjsKaW1wb3J0IFRhYkNvbnRyb2wgZnJvbSAiY29tcG9uZW50cy9jb250ZW50L3RhYmNvbnRyb2wvVGFiQ29udHJvbCI7CmltcG9ydCBHb29kc0xpc3QgZnJvbSAiY29tcG9uZW50cy9jb250ZW50L2dvb2RzL0dvb2RzTGlzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2F0ZWdvcnkiICwKICBjb21wb25lbnRzOnsKICAgIENhdGVnb3J5TmF2QmFyLAogICAgQ2F0ZWdvcnlTbGlkZSwKICAgIENhdGVnb3J5Q29udGVudCwKICAgIFNjcm9sbCwKICAgIFRhYkNvbnRyb2wsCiAgICBHb29kc0xpc3QKICB9LAogIG1peGluczpbaW1nTWl4aW5dLAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIGNhdGVnb3J5TmFtZTpbXSwKICAgICAgc3ViQ2F0ZWdvcnk6W10sCiAgICAgIGN1cnJlbnRJbmRleDowLAogICAgICB0aXRsZXM6WyfmtYHooYwnLCfmlrDmrL4nLCfnsr7pgIknXSwKICAgICAgY2F0ZWdvcnlEZXRhaWxMaXN0OiBbXSwKICAgICAgY3VycmVudFk6MAogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Q2F0ZWdvcnlBbGxEYXRhKCkKICB9LAogIG1ldGhvZHM6ewogICAgLy/ojrflj5bliIbnsbvlhajpg6jmlbDmja4KICAgIGdldENhdGVnb3J5QWxsRGF0YSgpewogICAgICAvL+iOt+WPluWIhuexu+W3puS+p+aVsOaNrgogICAgICBnZXRDYXRlZ29yeSgpLnRoZW4ocmVzPT57CiAgICAgICAgdGhpcy5jYXRlZ29yeU5hbWUgPSByZXMuZGF0YS5jYXRlZ29yeS5saXN0CiAgICAgICAgY29uc29sZS5sb2codGhpcy5jYXRlZ29yeU5hbWUpCiAgICAgICAgICAvL+WIneWni+WMluW3puS+p+esrOS4gOihjOaYvuekuueahOWPs+i+ueaVsOaNrgogICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy4kcmVmcy5jb250ZW50KQogICAgICAgIHRoaXMuZ2V0U3ViY2F0ZWdvcnkodGhpcy5jYXRlZ29yeU5hbWVbdGhpcy5jdXJyZW50SW5kZXhdLm1haXRLZXksdGhpcy5jdXJyZW50SW5kZXgpCiAgICAgICAgLy/liJ3lp4vljJblt6bkvqfnrKzkuIDooYzor6bmg4XmlbDmja4KICAgICAgICB0aGlzLmdldENhdGVnb3J5RGV0YWlsKHRoaXMuY2F0ZWdvcnlOYW1lW3RoaXMuY3VycmVudEluZGV4XS5taW5pV2FsbGtleSwncG9wJykKICAgICAgfSkKCiAgICB9LAogICAgLy/lj5HpgIHnvZHnu5zor7fmsYLojrflj5blt6bkvqfmlbDmja4KICAgIHNsaWRlSXRlbUNsaWNrKHttYWl0S2V5LGluZGV4fSl7CiAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gaW5kZXgKICAgICAgdGhpcy5nZXRTdWJjYXRlZ29yeShtYWl0S2V5LHRoaXMuY3VycmVudEluZGV4KQogICAgICB0aGlzLmdldENhdGVnb3J5RGV0YWlsKHRoaXMuY2F0ZWdvcnlOYW1lW3RoaXMuY3VycmVudEluZGV4XS5taW5pV2FsbGtleSwncG9wJykKICAgIH0sCiAgICAvL+WPkemAgee9kee7nOivt+axguiOt+WPluWPs+S+p+aVsOaNrgogICAgZ2V0U3ViY2F0ZWdvcnkobWFpdEtleSxpbmRleCl7CiAgICAgIGdldFN1YmNhdGVnb3J5KG1haXRLZXkpLnRoZW4ocmVzPT57CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy4kcmVmcy5jb250ZW50KQogICAgICAgIHRoaXMuc3ViQ2F0ZWdvcnlbaW5kZXhdID0gcmVzLmRhdGEubGlzdAogICAgICAgIC8vIOiOt+WPluWujOaVsOaNruiuqee7hOS7tuW8uuWItuWIt+aWsOS6hgogICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgIH0pCiAgICB9LAogICAgLy/lj5HpgIHnvZHnu5zor7fmsYLojrflj5bor6bmg4XmlbDmja4KICAgIGdldENhdGVnb3J5RGV0YWlsKG1pbmlXYWxsa2V5LHR5cGUpewogICAgICBnZXRDYXRlZ29yeURldGFpbChtaW5pV2FsbGtleSx0eXBlKS50aGVuKHJlcz0+ewogICAgICAgIHRoaXMuY2F0ZWdvcnlEZXRhaWxMaXN0ID0gcmVzCiAgICAgIH0pCiAgICB9LAogICAgLy/liLfmlrBzY3JvbGwKICAgIGltZ0xvYWQoKXsKICAgICAgdGhpcy4kcmVmcy5zY3JvbGwucmVmcmVzaCgpCiAgICB9LAogICAgLy/lr7zoiKrngrnlh7sKICAgIGl0ZW1DbGljayhpbmRleCl7CiAgICAgIGNvbnN0IHRpdGxlcyA9IFsncG9wJywnbmV3Jywnc2VsbCddCiAgICAgIHRoaXMuZ2V0Q2F0ZWdvcnlEZXRhaWwodGhpcy5jYXRlZ29yeU5hbWVbdGhpcy5jdXJyZW50SW5kZXhdLm1pbmlXYWxsa2V5LHRpdGxlc1tpbmRleF0pCiAgICB9CiAgfSwKICBkZWFjdGl2YXRlZCgpIHsKICAgIHRoaXMuY3VycmVudFkgPSB0aGlzLiRyZWZzLnNjcm9sbC5nZXRQb3NpdGlvblkoKQogICAgdGhpcy4kYnVzLiRvZmYoJ2ltZ0xvYWQnLHRoaXMuaW1nTGlzdGVuZXIpCiAgfSwKICBhY3RpdmF0ZWQoKSB7CiAgICB0aGlzLiRyZWZzLnNjcm9sbC5zY3JvbGxUbygwLHRoaXMuY3VycmVudFksNTApCiAgICB0aGlzLiRyZWZzLnNjcm9sbC5yZWZyZXNoKCkKICB9Cgp9Cg=="},{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Category.vue","sourceRoot":"src/views/category","sourcesContent":["<template>\n  <div class=\"category\">\n    <!--导航-->\n    <category-nav-bar/>\n    <!--侧边栏-->\n    <category-slide :category-name=\"categoryName\" @slideItemClick=\"slideItemClick\" />\n    <scroll class=\"scroll_height\" ref=\"scroll\">\n      <!--主体部分-->\n      <category-content :sub-category=\"subCategory[currentIndex]\" ref=\"content\" @imgLoad=\"imgLoad\"/>\n      <!--导航-->\n      <tab-control :titles=\"titles\" @itemClick=\"itemClick\"/>\n      <!--商品展示列表-->\n      <goods-list :goods=\"categoryDetailList\"/>\n    </scroll>\n  </div>\n</template>\n\n<script>\n  import CategoryNavBar from \"./children/CategoryNavBar\";\n  import CategorySlide from \"./children/CategorySlide\";\n  import CategoryContent from \"./children/CategoryContent\";\n  import {getCategory,getSubcategory,getCategoryDetail} from 'network/category'\n  import {imgMixin} from 'common/mixin'\n  import Scroll from \"components/common/scroll/Scroll\";\n  import TabControl from \"components/content/tabcontrol/TabControl\";\n  import GoodsList from \"components/content/goods/GoodsList\";\n  export default {\n    name: \"Category\" ,\n    components:{\n      CategoryNavBar,\n      CategorySlide,\n      CategoryContent,\n      Scroll,\n      TabControl,\n      GoodsList\n    },\n    mixins:[imgMixin],\n    data(){\n      return {\n        categoryName:[],\n        subCategory:[],\n        currentIndex:0,\n        titles:['流行','新款','精选'],\n        categoryDetailList: [],\n        currentY:0\n      }\n    },\n    created() {\n      this.getCategoryAllData()\n    },\n    methods:{\n      //获取分类全部数据\n      getCategoryAllData(){\n        //获取分类左侧数据\n        getCategory().then(res=>{\n          this.categoryName = res.data.category.list\n          console.log(this.categoryName)\n            //初始化左侧第一行显示的右边数据\n            // console.log(this.$refs.content)\n          this.getSubcategory(this.categoryName[this.currentIndex].maitKey,this.currentIndex)\n          //初始化左侧第一行详情数据\n          this.getCategoryDetail(this.categoryName[this.currentIndex].miniWallkey,'pop')\n        })\n\n      },\n      //发送网络请求获取左侧数据\n      slideItemClick({maitKey,index}){\n        this.currentIndex = index\n        this.getSubcategory(maitKey,this.currentIndex)\n        this.getCategoryDetail(this.categoryName[this.currentIndex].miniWallkey,'pop')\n      },\n      //发送网络请求获取右侧数据\n      getSubcategory(maitKey,index){\n        getSubcategory(maitKey).then(res=>{\n          // console.log(this.$refs.content)\n          this.subCategory[index] = res.data.list\n          // 获取完数据让组件强制刷新了\n          this.$forceUpdate();\n        })\n      },\n      //发送网络请求获取详情数据\n      getCategoryDetail(miniWallkey,type){\n        getCategoryDetail(miniWallkey,type).then(res=>{\n          this.categoryDetailList = res\n        })\n      },\n      //刷新scroll\n      imgLoad(){\n        this.$refs.scroll.refresh()\n      },\n      //导航点击\n      itemClick(index){\n        const titles = ['pop','new','sell']\n        this.getCategoryDetail(this.categoryName[this.currentIndex].miniWallkey,titles[index])\n      }\n    },\n    deactivated() {\n      this.currentY = this.$refs.scroll.getPositionY()\n      this.$bus.$off('imgLoad',this.imgListener)\n    },\n    activated() {\n      this.$refs.scroll.scrollTo(0,this.currentY,50)\n      this.$refs.scroll.refresh()\n    }\n\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .category{\n    position: relative;\n    height: 100vh;\n    .scroll_height{\n      position: absolute;\n      top: 44px;\n      left: 100px;\n      right: 0;\n      bottom: 49px;\n      overflow: hidden;\n    }\n  }\n</style>\n"]}]}