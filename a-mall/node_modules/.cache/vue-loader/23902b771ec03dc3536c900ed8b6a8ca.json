{"remainingRequest":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!G:\\webstorm-test\\shop-mall-master\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\webstorm-test\\shop-mall-master\\src\\views\\home\\Home.vue","mtime":1603446829000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8v5a+85YWl5YWs5YWx57uE5Lu2CmltcG9ydCBUYWJDb250cm9sIGZyb20gImNvbXBvbmVudHMvY29udGVudC90YWJjb250cm9sL1RhYkNvbnRyb2wiOwppbXBvcnQgR29vZHNMaXN0IGZyb20gImNvbXBvbmVudHMvY29udGVudC9nb29kcy9Hb29kc0xpc3QiOwppbXBvcnQgU2Nyb2xsIGZyb20gImNvbXBvbmVudHMvY29tbW9uL3Njcm9sbC9TY3JvbGwiOwovL+WvvOWFpeWtkOe7hOS7tgppbXBvcnQgU3dpcGVyIGZyb20gIi4vY2hpbGRyZW4vU3dpcGVyIjsKaW1wb3J0IFJlY29tbWVuZFZpZXcgZnJvbSAiLi9jaGlsZHJlbi9SZWNvbW1lbmRWaWV3IjsKaW1wb3J0IEhvbWVOYXZCYXIgZnJvbSAiLi9jaGlsZHJlbi9Ib21lTmF2QmFyIjsKaW1wb3J0IEZldHVyZVZpZXcgZnJvbSAiLi9jaGlsZHJlbi9GZXR1cmVWaWV3IjsKCi8v5a+85YWl5Ye95pWwCmltcG9ydCB7Z2V0SG9tZU11dGlsRGF0YSxnZXRIb21lR29vZHNEYXRhfSBmcm9tICJuZXR3b3JrL2hvbWUiOwppbXBvcnQge2RlYm91bmNlfSBmcm9tICJjb21tb24vdXRpbHMiOwppbXBvcnQge2ltZ01peGluLGJhY2tUb3BNaXhpbn0gZnJvbSAnY29tbW9uL21peGluJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWUiLAogIGNvbXBvbmVudHM6ewogICAgUmVjb21tZW5kVmlldywKICAgIEhvbWVOYXZCYXIsCiAgICBTd2lwZXIsCiAgICBGZXR1cmVWaWV3LAogICAgVGFiQ29udHJvbCwKICAgIEdvb2RzTGlzdCwKICAgIFNjcm9sbCwKICB9LAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIGJhbm5lcnM6W10sCiAgICAgIHJlY29tbWVuZHM6W10sCiAgICAgIHRpdGxlczpbJ+a1geihjCcsJ+aWsOasvicsJ+eyvumAiSddLAogICAgICBnb29kczp7CiAgICAgICAgcG9wOntwYWdlOjAsbGlzdDpbXX0sCiAgICAgICAgbmV3OntwYWdlOjAsbGlzdDpbXX0sCiAgICAgICAgc2VsbDp7cGFnZTowLGxpc3Q6W119LAogICAgICB9LAogICAgICBjdXJyZW50VGl0bGVzOidwb3AnLAogICAgICBpc1Nob3BUYWJDb250cm9sOmZhbHNlLAogICAgICB0YWJPZmZzZXRUb3A6MCwKICAgICAgY3VycmVudFk6MCAsCiAgICAgIGlzTG9hZGluZzp0cnVlCiAgICB9CiAgfSwKICBtaXhpbnM6W2ltZ01peGluLGJhY2tUb3BNaXhpbl0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0SG9tZU11dGlsKCkKICAgIHRoaXMuZ2V0SG9tZUdvb2RzKCdwb3AnKQogICAgdGhpcy5nZXRIb21lR29vZHMoJ25ldycpCiAgICB0aGlzLmdldEhvbWVHb29kcygnc2VsbCcpCiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc3QgcmVmcmVzaCA9IGRlYm91bmNlKHRoaXMuJHJlZnMuc2Nyb2xsLnJlZnJlc2gsMTAwKQogICAgZGVib3VuY2UodGhpcy4kYnVzLiRvbignaW1nTG9hZCcsICgpID0+IHsKICAgICAgcmVmcmVzaCgpCiAgICB9KSkKICB9LAogIG1ldGhvZHM6ewogICAgZ2V0SG9tZU11dGlsKCl7CiAgICAgIHJldHVybiBnZXRIb21lTXV0aWxEYXRhKCkudGhlbihyZXM9PnsKICAgICAgICB0aGlzLmJhbm5lcnMgPSByZXMuZGF0YS5iYW5uZXIubGlzdAogICAgICAgIHRoaXMucmVjb21tZW5kcyA9IHJlcy5kYXRhLnJlY29tbWVuZC5saXN0CiAgICAgIH0pCiAgICB9LAogICAgZ2V0SG9tZUdvb2RzKHR5cGUpewogICAgICBsZXQgcGFnZSA9IHRoaXMuZ29vZHNbdHlwZV0ucGFnZSArIDEKICAgICAgcmV0dXJuIGdldEhvbWVHb29kc0RhdGEodHlwZSxwYWdlKS50aGVuKHJlcz0+ewogICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGEubGlzdAogICAgICAgIHRoaXMuZ29vZHNbdHlwZV0ubGlzdC5wdXNoKC4uLmRhdGEpCiAgICAgICAgdGhpcy5nb29kc1t0eXBlXS5wYWdlICs9IDEKICAgICAgICAvL+WujOaIkOS4iuaLieWKoOi9veabtOWkmgogICAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsICYmIHRoaXMuJHJlZnMuc2Nyb2xsLmZpbmlzaExvYWQoKQogICAgICB9KQogICAgfSwKICAgIGl0ZW1DbGljayhpbmRleCl7CiAgICAgIHN3aXRjaCAoaW5kZXgpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICB0aGlzLmN1cnJlbnRUaXRsZXMgPSAncG9wJwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgdGhpcy5jdXJyZW50VGl0bGVzID0gJ25ldycKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHRoaXMuY3VycmVudFRpdGxlcyA9ICdzZWxsJwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgdGhpcy4kcmVmcy50YWJDb250cm9sLmN1cnJlbnRJbmRleCA9IGluZGV4CiAgICAgIHRoaXMuJHJlZnMudGFiQ29udHJvbDEuY3VycmVudEluZGV4ID0gaW5kZXgKICAgIH0sCgogICAgc2Nyb2xsVG9wKCl7CiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnNjcm9sbFRvKDAsMCw1MDApCiAgICB9LAogICAgbG9hZE1vcmUoKXsKICAgICAgdGhpcy5nZXRIb21lR29vZHModGhpcy5jdXJyZW50VGl0bGVzKQogICAgfSwKICAgIHNjcm9sbFBvc2l0b24ocG9zaXRpb24pewogICAgICB0aGlzLmlzU2hvcFRhYkNvbnRyb2wgPSBwb3NpdGlvbi55IDwgKC10aGlzLnRhYk9mZnNldFRvcCkgPyB0cnVlICA6IGZhbHNlCiAgICB9LAogICAgaW1nTG9hZE92ZXIoKXsKICAgICAgdGhpcy50YWJPZmZzZXRUb3AgPSB0aGlzLiRyZWZzLnRhYkNvbnRyb2wxLiRlbC5vZmZzZXRUb3AKICAgIH0sCiAgfSwKICBhY3RpdmF0ZWQoKSB7CiAgICB0aGlzLiRyZWZzLnNjcm9sbC5zY3JvbGxUbygwLHRoaXMuY3VycmVudFksNTApCiAgICB0aGlzLiRyZWZzLnNjcm9sbC5yZWZyZXNoKCkKICB9LAogIGRlYWN0aXZhdGVkKCkgewogICAgdGhpcy5jdXJyZW50WSA9IHRoaXMuJHJlZnMuc2Nyb2xsLmdldFBvc2l0aW9uWSgpCiAgICB0aGlzLiRidXMuJG9mZignaW1nTG9hZCcsdGhpcy5pbWdMaXN0ZW5lcikKICB9Cn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n  <div class=\"home\">\n    <!--导航栏-->\n    <home-nav-bar/>\n    <tab-control :titles=\"titles\" @itemClick=\"itemClick\" :class=\"{tab_control:isShopTabControl}\" ref=\"tabControl\" v-show=\"isShopTabControl\" />\n    <scroll class=\"scroll\" :isPullUpLoad=\"true\" ref=\"scroll\"\n       @onPullingUp=\"loadMore\" :whatProbeType=\"2\" @showBackTop=\"showBackTop\"  @scrollPositon=\"scrollPositon\"\n    >\n      <template v-slot:default>\n        <!--轮播图-->\n        <swiper :banners=\"banners\" @imgLoadOver=\"imgLoadOver\"/>\n        <!--推荐信息-->\n        <recommend-view :recommends=\"recommends\"/>\n        <!--特性-->\n        <feture-view/>\n        <!--导航控制-->\n        <tab-control :titles=\"titles\" @itemClick=\"itemClick\" ref=\"tabControl1\"/>\n        <!--商品列表-->\n        <goods-list :goods=\"goods[currentTitles].list\"/>\n      </template>\n    </scroll>\n    <!--返回顶部按钮-->\n    <back-top @click.native=\"scrollTop\" v-show=\"isShopBackTop\"/>\n  </div>\n</template>\n\n<script>\n  //导入公共组件\n  import TabControl from \"components/content/tabcontrol/TabControl\";\n  import GoodsList from \"components/content/goods/GoodsList\";\n  import Scroll from \"components/common/scroll/Scroll\";\n  //导入子组件\n  import Swiper from \"./children/Swiper\";\n  import RecommendView from \"./children/RecommendView\";\n  import HomeNavBar from \"./children/HomeNavBar\";\n  import FetureView from \"./children/FetureView\";\n\n  //导入函数\n  import {getHomeMutilData,getHomeGoodsData} from \"network/home\";\n  import {debounce} from \"common/utils\";\n  import {imgMixin,backTopMixin} from 'common/mixin'\n  export default {\n    name: \"Home\",\n    components:{\n      RecommendView,\n      HomeNavBar,\n      Swiper,\n      FetureView,\n      TabControl,\n      GoodsList,\n      Scroll,\n    },\n    data(){\n      return {\n        banners:[],\n        recommends:[],\n        titles:['流行','新款','精选'],\n        goods:{\n          pop:{page:0,list:[]},\n          new:{page:0,list:[]},\n          sell:{page:0,list:[]},\n        },\n        currentTitles:'pop',\n        isShopTabControl:false,\n        tabOffsetTop:0,\n        currentY:0 ,\n        isLoading:true\n      }\n    },\n    mixins:[imgMixin,backTopMixin],\n    created() {\n      this.getHomeMutil()\n      this.getHomeGoods('pop')\n      this.getHomeGoods('new')\n      this.getHomeGoods('sell')\n    },\n    mounted() {\n      const refresh = debounce(this.$refs.scroll.refresh,100)\n      debounce(this.$bus.$on('imgLoad', () => {\n        refresh()\n      }))\n    },\n    methods:{\n      getHomeMutil(){\n        return getHomeMutilData().then(res=>{\n          this.banners = res.data.banner.list\n          this.recommends = res.data.recommend.list\n        })\n      },\n      getHomeGoods(type){\n        let page = this.goods[type].page + 1\n        return getHomeGoodsData(type,page).then(res=>{\n          let data = res.data.list\n          this.goods[type].list.push(...data)\n          this.goods[type].page += 1\n          //完成上拉加载更多\n          this.$refs.scroll && this.$refs.scroll.finishLoad()\n        })\n      },\n      itemClick(index){\n        switch (index) {\n          case 0:\n            this.currentTitles = 'pop'\n            break;\n          case 1:\n            this.currentTitles = 'new'\n            break;\n          case 2:\n            this.currentTitles = 'sell'\n            break;\n        }\n        this.$refs.tabControl.currentIndex = index\n        this.$refs.tabControl1.currentIndex = index\n      },\n\n      scrollTop(){\n        this.$refs.scroll.scrollTo(0,0,500)\n      },\n      loadMore(){\n        this.getHomeGoods(this.currentTitles)\n      },\n      scrollPositon(position){\n        this.isShopTabControl = position.y < (-this.tabOffsetTop) ? true  : false\n      },\n      imgLoadOver(){\n        this.tabOffsetTop = this.$refs.tabControl1.$el.offsetTop\n      },\n    },\n    activated() {\n      this.$refs.scroll.scrollTo(0,this.currentY,50)\n      this.$refs.scroll.refresh()\n    },\n    deactivated() {\n      this.currentY = this.$refs.scroll.getPositionY()\n      this.$bus.$off('imgLoad',this.imgListener)\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .home {\n    position: relative;\n    height: 100vh;\n  }\n  .scroll{\n    overflow: hidden;\n    position: absolute;\n    top: 48px;\n    right: 0;\n    left: 0;\n    bottom: 54px;\n  }\n  .tab_control{\n    position: relative;\n    z-index: 9;\n    top: -1px;\n  }\n</style>\n"]}]}