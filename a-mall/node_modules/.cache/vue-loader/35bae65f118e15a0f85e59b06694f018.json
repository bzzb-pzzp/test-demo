{"remainingRequest":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!G:\\webstorm-test\\shop-mall-master\\src\\views\\detail\\Detail.vue?vue&type=style&index=0&id=117d0e76&lang=scss&scoped=true&","dependencies":[{"path":"G:\\webstorm-test\\shop-mall-master\\src\\views\\detail\\Detail.vue","mtime":1603446829000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_sass-loader@8.0.2@sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNkZXRhaWx7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGhlaWdodDogMTAwJTsKICB6LWluZGV4OiAxOTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIG92ZXJmbG93OiBoaWRkZW47CiAgLnNjcm9sbCB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDQ0cHg7CiAgICBsZWZ0OiAwOwogICAgcmlnaHQ6IDA7CiAgICBib3R0b206IDUwcHg7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogIH0KICAucmVjb21tZW5kewogICAgcGFkZGluZzogOHB4OwogIH0KfQo="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\n  <div id=\"detail\">\n    <!--导航-->\n    <detail-nav-bar :titles=\"titles\" @itemClick=\"itemClick\" ref=\"nav_bar\"/>\n    <scroll class=\"scroll\" ref=\"scroll\" :whatProbeType=\"3\" @scrollPositon=\"scrollPositon\" @showBackTop=\"showBackTop\">\n      <template  v-slot:default>\n        <!--轮播图-->\n        <detail-swiper :top-images=\"topImages\"/>\n        <!--基本信息-->\n        <detail-base-info :base-data=\"baseData\"/>\n        <!--店铺信息-->\n        <detail-shop-info :shop-info=\"shopInfo\"/>\n        <!--穿着效果-->\n        <detai-dress-info :detail-info=\"detailInfo\" @imgLoad=\"imgLoad\"/>\n        <!--尺码标准-->\n        <detail-item-params :item-params=\"itemParams\" ref=\"itemParams\"/>\n        <!--评论信息-->\n        <detail-comment-info :rate=\"rate\" ref=\"comment\"/>\n        <!--推荐商品-->\n        <div ref=\"recommend\">\n          <p class=\"recommend\">推荐商品</p>\n          <goods-list :goods=\"recommended\"/>\n        </div>\n      </template>\n    </scroll>\n    <!--返回顶部按钮-->\n    <back-top @click.native=\"scrollTop\" v-show=\"isShopBackTop\"/>\n    <!--底部-->\n    <detail-bottom-bar @addCart=\"addCart\"/>\n  </div>\n</template>\n\n<script>\n  import DetailNavBar from \"./children/DetailNavBar\";\n  import DetailSwiper from \"./children/DetailSwiper\";\n  import DetailBaseInfo from \"./children/DetailBaseInfo\";\n  import DetailShopInfo from \"./children/DetailShopInfo\";\n  import DetaiDressInfo from \"./children/DetaiDressInfo\";\n  import DetailItemParams from \"./children/DetailItemParams\";\n  import DetailCommentInfo from \"./children/DetailCommentInfo\";\n  import DetailBottomBar from \"./children/DetailBottomBar\";\n  import {getDetailData, GetDeatilBaseData, GetDetailShopInfo, GetItemParams, getRecommentdData} from 'network/detail'\n  import Scroll from \"components/common/scroll/Scroll\";\n  import GoodsList from \"components/content/goods/GoodsList\";\n  import {imgMixin,backTopMixin} from 'common/mixin'\n  export default {\n    name: \"Detail\",\n    components:{\n      GoodsList,\n      DetailShopInfo,\n      DetailBaseInfo,\n      DetailNavBar,\n      DetailSwiper,\n      DetaiDressInfo,\n      DetailItemParams,\n      Scroll,\n      DetailCommentInfo,\n      DetailBottomBar\n    },\n    data(){\n      return {\n        titles:['商品','参数','评论','推荐'],\n        //轮播图照片\n        topImages:[],\n        baseData : {},\n        shopInfo:{},\n        detailInfo:{},\n        itemParams:{},\n        rate:{},\n        recommended:[],\n        offsetTopY:[],\n        currentIndex:0,\n        iid:0\n      }\n    },\n    mixins:[imgMixin,backTopMixin],\n    created() {\n      getDetailData(this.$route.params.iid).then(res=>{\n        this.iid = res.iid\n        const data = res.result\n        this.topImages = data.itemInfo.topImages\n        this.baseData = new GetDeatilBaseData(data.itemInfo,data.columns,data.shopInfo)\n        this.shopInfo = new GetDetailShopInfo(data.shopInfo)\n        this.detailInfo = data.detailInfo\n        this.itemParams =data.itemParams ? new GetItemParams(data.itemParams):{}\n        this.rate = data.rate.list?data.rate.list[0]:{}\n      })\n      //获取推荐信息\n      getRecommentdData().then(res=>{\n        this.recommended = res.data.list\n      })\n    },\n    methods:{\n      imgLoad(){\n        this.$refs.scroll.refresh()\n        this.offsetTopY.push(0)\n        this.offsetTopY.push(this.$refs.itemParams.$el.offsetTop)\n        this.offsetTopY.push(this.$refs.comment.$el.offsetTop)\n        this.offsetTopY.push(this.$refs.recommend.offsetTop)\n        this.offsetTopY.push(Number.MAX_VALUE)\n      },\n      itemClick(index){\n        this.$refs.scroll.scrollTo(0,-this.offsetTopY[index],500)\n      },\n      scrollPositon(position){\n        let positionY = -position.y\n        for(let i = 0;i < this.offsetTopY.length-1;i++){\n          if(this.currentIndex !== i && (positionY > this.offsetTopY[i] && positionY < this.offsetTopY[i+1])){\n            this.currentIndex = i\n\n          }\n        }\n        this.$refs.nav_bar.currentIndex = this.currentIndex\n      },\n      addCart(){\n        const cartListData = {\n          title : this.baseData.title,\n          desc : this.baseData.desc,\n          iid : this.iid,\n          image : this.topImages[0],\n          price:this.baseData.lowNowPrice\n        }\n        this.$store.dispatch('addCart',cartListData)\n      }\n    },\n    destroyed() {\n      this.$bus.$off('imgLoad',this.imgListener)\n    }\n\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  #detail{\n    position: relative;\n    height: 100%;\n    z-index: 19;\n    background-color: #fff;\n    overflow: hidden;\n    .scroll {\n      position: absolute;\n      top: 44px;\n      left: 0;\n      right: 0;\n      bottom: 50px;\n      overflow: hidden;\n    }\n    .recommend{\n      padding: 8px;\n    }\n  }\n</style>\n"]}]}