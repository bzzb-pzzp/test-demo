{"remainingRequest":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!G:\\webstorm-test\\shop-mall-master\\src\\views\\category\\Category.vue?vue&type=style&index=0&id=1a0c5ce5&lang=scss&scoped=true&","dependencies":[{"path":"G:\\webstorm-test\\shop-mall-master\\src\\views\\category\\Category.vue","mtime":1603446829000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_sass-loader@8.0.2@sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstorm-test\\shop-mall-master\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jYXRlZ29yeXsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgaGVpZ2h0OiAxMDB2aDsKICAuc2Nyb2xsX2hlaWdodHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogNDRweDsKICAgIGxlZnQ6IDEwMHB4OwogICAgcmlnaHQ6IDA7CiAgICBib3R0b206IDQ5cHg7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogIH0KfQo="},{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Category.vue","sourceRoot":"src/views/category","sourcesContent":["<template>\n  <div class=\"category\">\n    <!--导航-->\n    <category-nav-bar/>\n    <!--侧边栏-->\n    <category-slide :category-name=\"categoryName\" @slideItemClick=\"slideItemClick\" />\n    <scroll class=\"scroll_height\" ref=\"scroll\">\n      <!--主体部分-->\n      <category-content :sub-category=\"subCategory[currentIndex]\" ref=\"content\" @imgLoad=\"imgLoad\"/>\n      <!--导航-->\n      <tab-control :titles=\"titles\" @itemClick=\"itemClick\"/>\n      <!--商品展示列表-->\n      <goods-list :goods=\"categoryDetailList\"/>\n    </scroll>\n  </div>\n</template>\n\n<script>\n  import CategoryNavBar from \"./children/CategoryNavBar\";\n  import CategorySlide from \"./children/CategorySlide\";\n  import CategoryContent from \"./children/CategoryContent\";\n  import {getCategory,getSubcategory,getCategoryDetail} from 'network/category'\n  import {imgMixin} from 'common/mixin'\n  import Scroll from \"components/common/scroll/Scroll\";\n  import TabControl from \"components/content/tabcontrol/TabControl\";\n  import GoodsList from \"components/content/goods/GoodsList\";\n  export default {\n    name: \"Category\" ,\n    components:{\n      CategoryNavBar,\n      CategorySlide,\n      CategoryContent,\n      Scroll,\n      TabControl,\n      GoodsList\n    },\n    mixins:[imgMixin],\n    data(){\n      return {\n        categoryName:[],\n        subCategory:[],\n        currentIndex:0,\n        titles:['流行','新款','精选'],\n        categoryDetailList: [],\n        currentY:0\n      }\n    },\n    created() {\n      this.getCategoryAllData()\n    },\n    methods:{\n      //获取分类全部数据\n      getCategoryAllData(){\n        //获取分类左侧数据\n        getCategory().then(res=>{\n          this.categoryName = res.data.category.list\n          console.log(this.categoryName)\n            //初始化左侧第一行显示的右边数据\n            // console.log(this.$refs.content)\n          this.getSubcategory(this.categoryName[this.currentIndex].maitKey,this.currentIndex)\n          //初始化左侧第一行详情数据\n          this.getCategoryDetail(this.categoryName[this.currentIndex].miniWallkey,'pop')\n        })\n\n      },\n      //发送网络请求获取左侧数据\n      slideItemClick({maitKey,index}){\n        this.currentIndex = index\n        this.getSubcategory(maitKey,this.currentIndex)\n        this.getCategoryDetail(this.categoryName[this.currentIndex].miniWallkey,'pop')\n      },\n      //发送网络请求获取右侧数据\n      getSubcategory(maitKey,index){\n        getSubcategory(maitKey).then(res=>{\n          // console.log(this.$refs.content)\n          this.subCategory[index] = res.data.list\n          // 获取完数据让组件强制刷新了\n          this.$forceUpdate();\n        })\n      },\n      //发送网络请求获取详情数据\n      getCategoryDetail(miniWallkey,type){\n        getCategoryDetail(miniWallkey,type).then(res=>{\n          this.categoryDetailList = res\n        })\n      },\n      //刷新scroll\n      imgLoad(){\n        this.$refs.scroll.refresh()\n      },\n      //导航点击\n      itemClick(index){\n        const titles = ['pop','new','sell']\n        this.getCategoryDetail(this.categoryName[this.currentIndex].miniWallkey,titles[index])\n      }\n    },\n    deactivated() {\n      this.currentY = this.$refs.scroll.getPositionY()\n      this.$bus.$off('imgLoad',this.imgListener)\n    },\n    activated() {\n      this.$refs.scroll.scrollTo(0,this.currentY,50)\n      this.$refs.scroll.refresh()\n    }\n\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .category{\n    position: relative;\n    height: 100vh;\n    .scroll_height{\n      position: absolute;\n      top: 44px;\n      left: 100px;\n      right: 0;\n      bottom: 49px;\n      overflow: hidden;\n    }\n  }\n</style>\n"]}]}